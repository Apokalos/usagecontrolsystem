@startuml
actor Device #red
participant PEPRest
participant RequestManager
actor UCFRestController
Device->PEPRest : tryAccess
PEPRest->PEPRest : setup message  
note right:PEP URI, policy, request,\ncallback interface response
PEPRest->RequestManager : sendMessage to context handler via REST
RequestManager->UCFRestController : forwards it to context handler
PEPRest->PEPRest : put msgID into thread
PEPRest->PEPRest : wait for response (from the Executer service) 
UCFRestController->PEPRest : tryAccessResponse
alt PERMIT

	PEPRest->PEPRest : startAccess
	PEPRest->PEPRest : setup message to be sent
	PEPRest->RequestManager : sendMessage to context handler via REST
	RequestManager->UCFRestController : forwards it to context handler
	PEPRest->PEPRest : put msgID into thread
	PEPRest->PEPRest : wait for response (from the Executer service)
	UCFRestController->PEPRest : startAccessResponse
	alt PERMIT
	
		PEPRest->PEPRest : end
	else DEMNY
		 PEPRest->PEPRest : log
	end  
end
@enduml
